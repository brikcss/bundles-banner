const path=require("path");module.exports=((t={},n={})=>(n.options=Object.assign({include:[".js",".css"],prefix:"/*! ",suffix:" */",joinWith:" | ",metadata:["author","reference"]},n.options),t.output.forEach((o,e)=>{if("function"==typeof n.options.include&&!n.options.include(o,t)||!n.options.include.includes(path.extname(o.source.path)))return;const i=n.options.metadata.map(t=>{if(t instanceof Array)t=t.join(" ");else if("string"==typeof t){if(!o.data[t])return;t="@"+t+" "+o.data[t]}return t});i.unshift(path.basename(o.source.path)),o.content=n.options.prefix+i.join(n.options.joinWith)+n.options.suffix+"\n\n"+o.content}),t));